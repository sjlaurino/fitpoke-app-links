<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Open Fitpoke</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding:24px; line-height:1.5; }
    .btn { display:inline-block; background:#ff6b9d; color:#fff; padding:12px 18px; border-radius:8px; text-decoration:none; font-weight:600; }
    .muted { color:#666; font-size:14px; margin-top:12px; }
  </style>
  <script>
    function getParam(name){ return new URLSearchParams(location.search).get(name) || ''; }
    function openApp(){
      var token = encodeURIComponent(getParam('token'));
      var email = encodeURIComponent(getParam('email'));
      var url = 'fitpoke://reset-password?token=' + token + '&email=' + email;
      // Attempt immediate handoff to app
      window.location.replace(url);
      // After 1.2s, show fallback UI if the app didn’t open
      setTimeout(function(){ document.getElementById('fallback').style.display='block'; }, 1200);
    }
    window.addEventListener('load', openApp);
  </script>
</head>
<body>
  <h2>Opening Fitpoke…</h2>
  <p>If nothing happens, tap the button below to continue in the app.</p>
  <p><a class="btn" id="openBtn" href="#" onclick="openApp();return false;">Open in Fitpoke</a></p>
  <div id="fallback" class="muted" style="display:none">
    Still not working? Open the Fitpoke app manually and choose “Reset Password” again.
  </div>
</body>
</html>
